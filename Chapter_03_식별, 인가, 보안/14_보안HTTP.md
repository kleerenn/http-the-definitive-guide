# 14. 보안 HTTP

## HTTPS
- 모든 HTTP 요청과 응답 데이터는 네트워크로 보내지기 전에 암호화 
- HTTP 하부에 전송레벨 암호보안 계층을 제공(HTTP / SSL or TLS / TCP / IP)
  - 안전소켓 계층(SSL)혹은 전송계층 보안(TLS)를 이용하여 구현됨
  
## HTTPS 세부사항
- HTTP 프로토콜에 대칭, 비대칭 인증서 기 암호기법의 강력한 집합을 결합한 것. 
- 보안전송 계층을 통해 전송되는 HTTP
- HTTP 메시지를 TCP로 보내기 전에 암호화하는 보안계층으로 보낸다
- url이 http 스킴을 가지면 서버에 80번 포트로 연결 > TCP 커넥션 > TCP를 통해 HTTP요청/응답
- https 스킴을 가지면 443포트로 연결하고 TCP 커넥션 > SSL 보안 매개변수를 교환하면서 핸드셰이크 > 암호화된 HTTP 요청/응답
  - SSL 핸드셰이크에서는 프로토콜 버전 번호 교환, 양쪽이 알고있는 암호 선택, 양쪽 신원 확인, 채널을 암호화 하기 위한 임시 세션키를 생성한다.
  - SSL은 서버 인증서를 클라이언트로, 클라이언트 인증서를 서버로 나르는 상호인증을 지원
  - 클라이언트 인증서는 웹 브라우징에서는 흔히 쓰이지 않음
  - HTTPS는 항상 서버 인증서 요구(조직이름, 주소, 서버DNS 도메인 이름을 보여주는 인증서)

## HTTPS 클라이언트
- SSL은 복잡한 바이너리 프로토콜으로 가공되지 않은 SSL 트래픽을 직접 보내지 않을 것
- OpenSSL(암호법 라이브러리, SSL과 TLS 프로토콜을 구현한 오픈소스)과 같은 오픈소스를 활용한다

## 프락시를 통한 보안 트래픽 터널링
- 클라이언트가 서버로 보낼 데이터를 서버의 공개키로 암호화하면 프락시는 HTTP 헤더를 읽을 수 없다
- 프락시와 동작을 위해 HTTP SSL 터널링 프로토콜과 같은 기법을 활용한다.
  - 프락시에게 연결하고자 하는 안전한 호스트와 포트를 말함(평문. 암호화x)
  - CONNECT라 불리는 메서드를 이용하여 프락시에 희망 호스트와 포트번호로 연결을 요청 > 완료되면 클라이언트와 서버 사이에 데이터가 직접적으로 오가는 터널이 만들어짐
    - 예. ```CONNECT home.netscape.com:443 HTTP/1.0```
    - 프락시는 목적지 서버로 연결을 성공하고 ```200 Connection Established``` 응답을 보낸다