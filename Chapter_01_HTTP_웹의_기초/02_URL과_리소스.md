# 2. URL과 리소스

## 2.1 인터넷의 리소스 탐색하기
- URL(Uniform Resource Locator): 브라우저가 정보를 찾는데 필요한 리소스의 위치
- URI = URL + URN
- URL 구성: 스킴(클라이언트가 리소스에 어떻게 접근하는지? 프로토클):// 서버위치(호스팅) / 리소스 경로
    - mailto(이메일주소), ftp(파일), rtsp(비디오서버) 등 여러 프로토콜이 있다.
    
### 2.1.1 URL 이전의 시대
- 어디를 어떤 프로토콜로 접속해서 어디로 이동하고 파일을 어쩌고.. 복잡
- URL은 애플리케이션이 리소스에 접근할 수 있는 방법 제공(리소스가 어디에 있고 어떻게 가져오는지 정의)

## 2.2 URL 문법
- 리소스들을 각각 다른 스킴을 통해 접근
- ``` <스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>```
    - 스킴: 어떤 프로토콜로 서버에 접근 하는지
    - 사용자이름: 리소스에 접근하기 위한 사용자 이름(몇몇 스킴이 요구함)
    - 호스트: 리소스를 호스팅하는 서버의 호스트명이나 IP 주소
    - 포트: 서버가 열어놓은 포트 번호. (http의 기본 포트는 80)
    - 경로: 서버 내 리소스가 어디에 있는지
    - 파라미터: 이름/값을 쌍으로 가짐. ;로 구분하여 여러 개 가질 수 있음
    - 질의: 스킴에서 애플리케이션에 파라미터를 전달하는데 쓰임. ?로 구분
    - 프래그먼트: 리소소의 조각이나 일부분. 클라이언트에서만 사용

### 2.2.1 스킴: 사용할 프로토콜
- 리소스에 어떻게 접근하는지 정보 제공
- 대소문자 구분 없음 

### 2.2.2 호스트와 포트
- 리소스를 호스팅하고 있는 장비(호스트)와 장비 내 서버가 어디에 위치하는지
- 호스트명이나 IP 주소로 제공
- 서버가 열어놓은 네트워크 포트가 있음

### 2.2.3 사용자 이름과 비밀번호
- 데이터에 접근을 허용하기 위해 서버가 사용자 이름과 비밀번호를 요구함
- 예. FTP 서버
    - ```ftp://anoymous@ftp.prep.ai.com/pub/bnu```
        - 기본값으로 anonymous가 설정됨. @로 호스트와 분리
    - ```ftp://joe:joepw@www.joe.com/info.txt```
    - 사용자 이름 joe, 비밀번호 joepw를 보냄
    
### 2.2.4 경로
- 리소스가 서버의 어디에 있는지
- / 를 기준으로 경로조각으로 나눔

### 2.2.5 파라미터
- 서버에 정확한 요청을 하기위해 필요한 입력 파라미터
- ```이름/값``` 쌍의 리스트로 ;로 구분됨
- ```ftp://pres.com/pub/bnu;type=d``` 
    - 이름:type, 값:d

#### 2.2.6 질의 문자열
- 데이터베이스에서 요청받을 리소스 형식의 범위를 좁히기 위해
- ```http://www.joe.com/stock?item=12&color=blue```
    - ? 이후가 질의
    - & 로 나뉜 한쌍 (12번 블루색상)
    
### 2.2.7 프래그먼트
- 리소스의 특정 부분을 가리킴(리소스 내 조각)
- ```http://www.joe.com/tools.html#drills```
    -  tools.html 의 일부인 drill을 가리킴
- 서버는 일부가 아닌 전체를 다룸
- 브라우저가 서버에서 리소스를 내려받은 후 프래그먼트를 이용해 리소스의 일부를 보여줌

## 2.3  단축 URL
### 2.3.1 상대 URL
- URL : 상대, 절대 URL이 있음 
- 절대 URL은 리소스 접근에 필요한 모든 정보를 가진다 
- 상대 URL은 리소스 안에 있는 리소스를 간결하게 기술. base라는 다른 URL을 이용해야 함
    - 스킴, 호스트, 기타 다른 컴포넌트를 다 입력하지 않아도 됨
    - 컴포넌트가 포함된 리소스의 기저 url을 통해 알 수 있다
    - 상대 url은 프래그먼트이거나 url의 일부
    - 먼저 기저 URL을 찾는다. 
    - 리소스에서 명시적으로 기술되어 있기도 함. 없으면 상대 URL을 갖고 있는 리소스의 URL을 기저로 쓸 수 있다.

### 2.3.2 URL 확장
- 입력하면서 자동입력(확장)
- 호스트명 확장: 브라우저는 입력받은 호스트명을 전체 호스트명으로 확장할 수 있다(예. google 입력 -> www.google.com으로 확장)
- 히스토리 확장: 과거 사용자가 방문한 URL 기록을 저장해두고, 입력에 따라 그 URL들을 보여주며 선택하게 함

## 2.4  안전하지 않은 문자
- 안전한 전송은 정보가 유실될 위험없이 URL을 전송할 수 있음을 의미
    - SMTP(전자메일 프로토콜)은 특정 문자를 제거할 수도 있는 전송방식ㄱ을 사용
- URL은 알파벳 문자만 포함하도록 허락(문자 제거를 방지)
- 이스케이프를 통해 알파벳 외 문자 포함하여 안전하지 않은 문자를 안전한 문자로 인코딩
- 클라이언트(최초로 URL을 입력받는 애플리케이션)에서 안전하지 않거나 제한된 문자를 변환하는 것이 좋다


### 2.4.1 URL 문자 집합
- 보통 US-ASCII 문자집합을 사용(영문 키, 몇몇 제어 문자)
- US-ASCII는 비 영어 문자나 특정 이진 데이터를 포함하진 않음

### 2.4.2 인코딩 체계
- URL에 있는 안전하지 않은 문자를 표현하기 위함
- ```%```로 시작
-  ASCII 코드로 표현되는 두개의 16진수 숫자로 이루어진 이스케이프 문자로 바꾼다
- ``` 예) www.google.com/~ -> %7E 으로 인코딩```

### 2.4.3 문자 제한
- URL에 예약어로 되어있는 문자는 반드시 인코딩 되어야 함
- 예약어: %, /, ., #, 이런것들..

## 2.5 스킴의 바다
- Http: 하이퍼텍스트 전송 프로토콜. 포트값이 생략되어 있으면 기본은 80
- https: HTTP 커넥션 양 끝단에서 암호화를 위해 SSL(보안소켓 계층)을 사용. 기본 포트 443
- mailto: 이메일 주소
- ftp: 파일전송 프로토콜. FTP 서버에 있는 파일을 받거나 올리고 콘텐츠 목록을 가져오는데 사용. 사용자 이름, 비밀번호가 필요
- rtsp, rtspu: 실시간 스트리밍 프로토콜. 미디어 리소스 식별자
- file: 호스트 기기에서 바로 접근할 수 있는 파일 
- news: 뉴스 그룹에 접근. 리소스의 위치 정보를 충분히 포함하지 않음. 호스트명, 서버이름 x. 여러 서버를 통해 접근할 수 있어서 위치에 독립적임.
- talnet: 대화형 서비스 접근에 사용. 

## 2.6 미래
- URL은 리소스의 위치(주소)일 뿐 실제 이름은 아니다 = 리소스가 옮겨지면 URL은 더 사용할 수 없다는 말
- 위치와 상관없는 실제 객체의 이름을 사용하면 위치가 어디더라도 리소스를 찾을 수 있겠다 = URN(Uniform Resource Names)
    - 객체가 어디로 옮겨지더라도 항상 객체를 가리킬 수 있는 이름 제공
- URN으로 주소체계를 바꾸기엔 아직 할 일이 많아서 URL은 당분간 계속 사용될 것..
