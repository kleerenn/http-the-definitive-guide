
# 1장: HTTP 개관

## 1.1 HTTP: 인터넷의 멀티미디어 배달부
- http는 신뢰성 있는 데이터 전송 프로토콜을 사용 -> 데이터 전송 중 손상되거나 꼬이지 않음을 보장함

## 1.2 웹 클라이언트와 서버
- 웹서버 = http 서버(http 프로토콜로 의사소통): 인터넷의 데이터 저장, 클라이언트가 요청한 데이터 제공(http 응답)

## 1.3 리소스
- 웹서버는 웹 리소스를 관리
- 웹 리소스
    - 정적파일(텍스트, html, 워드, jpeg 이미지 등..)
    - 동적 콘텐츠 리소스: 요청에 따라 콘텐츠를 생산하는 프로그램
### 1.3.1 미디어 타입
- MIME(Multipurpose Internet Mail Extensions) 타입
- 웹서버가 모든 http 객체에 MIME 타입을 붙임(주타입/부타입)
    - text/html
    - text/plain
    - image/jpeg
    - video/quicktime 등..
    
### 1.3.2 URI
- 웹 서버 리소스 이름. 통합 자원 식별자(uniform resource identifier, URI)
    - 예) http://www.joe.com/specials/a.gif(프로토콜://이동/리소스이름)
    
### 1.3.3 URL
- 통합 자원 지시자(uniform resource locator, URL)
- 특정 서버의 한 리소스에 대한 구체적 위치(어디에 있고 어떻게 접근할 수 있는지)
- 스킴(주로 http 프로토콜)/인터넷주소/웹서버 리소스

### 1.3.4 URN
- 유니폼 리소스 이름(uniform resource name, URN)
- 리소스 위치에 영향받지 않는 유일무이한 이름 역할 -> 위치를 옮겨도 이름이 변하지 않는 한 문제없이 동작함
- 아직 덜 대중적


## 1.4 트랜잭션
- 요청(클라이언트 -> 서버)과 응답(서버->클라이언트)로 구성
- 클라이언트와 서버는 http 메세지를 통해 상호작용을 함
- 한 작업을 수행하기 위해 여러 http 트랜잭션을 수행한다.

#### 1.4.1 메서드
- 요청 종류
- http 요청 메세지는 한개의 메서드를 가짐
```
GET    리소스를 보내라
PUT    서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라
DELETE 지정한 리소스를 서버에서 삭제하라
POST   클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라
HEAD   지정한 리소스에 대한 응답에서 HTTP 헤더만 보내라
```

### 1.4.2 상태코드
- 응답메세지와 함께 반환됨
```
200  성공
302  다시 보내라. 다른데서 리소스를 가져가라
404  리소스가 없다
```
## 1.5 메세지
- 요청메세지, 응답메시지 >> 시작줄 / 헤더 / 본문으로 이루어짐
- 시작줄  
    - 무엇을 해야하는지, 무슨 일이 일어났는지(상태코드)
- 헤더
    - ```이름: 값``` 으로 구성됨
    - 빈 줄로 끝남
- 본문
    - (요청) 웹 서버로 데이터를 보냄, (응답) 데이터를 반환
    -문자열, 이진 데이터 포함 가능

## 1.6 TCP 커넥션

### 1.6.1 TCP/IP
- HTTP: 애플리케이션 계층 프로토콜 
- TCP: 오류없는 데이터 전송, 순서에 맞는 전달, 조각나지 않는 데이터 스트림 제공. **신뢰성 있는 의사소통** 
    - TCP/IP: TCP + IP 가 층을 이루는 ```패킷 교환 네트워크 프로토콜```의 집합
```
HTTP  애플리케이션 계층
----
TCP   전송 계층
----
IP    네트워크 계층
----
네트워크를 위한 링크 인터페이스
----
물리적인 네트워크 하드웨어
```      

### 1.6.2 접속, IP, 포트번호
- 클라이언트가 서버에 메세지 전송할 수 있기 전 TCP/IP 커넥션이 필요(IP 주소, 포트번호 이용)
- IP, 포트번호는 URL에서 파악
    - 호스트명은 IP 주소에 대한 별명같은 것.
    - 호스트명 >>>> (도메인 이름 서비스 DNS) >>>> IP 로 변환
    - 포트번호 기본값 80
- 순서: ```URL에서 호스트명 추출 > IP로 변환 > 포트번호 추출 > TCP 커넥션 > HTTP 요청/응답(트랜잭션)```

## 1.7 프로토콜 버전
- HTTP/0.9
    - GET 메서드만 지원
    - MIME 타입, 헤더, 버전번호 미지원
- HTTP/1.0
    - 처음으로 널리 쓰이기 시작한 버전
    - 버전번호, 헤더, 추가 메서드, 멀티미디어 객체 처리 추가
- HTTP/1.0+
    - keep-alive 커넥션
    - 가상호스팅 지원
    - 프락시 연결 지원
    
- HTTP/1.1
    - 더 복잡해진 웹 애플리케이션과 배포를 지원

- HTTP/2.0
    - 구글의 SPDY 프로토콜 기반으로 설계
    

## 1.8 웹의 구성요소
- 프락시: 클라이언트와 서버 사이에 위치한 HTTP 중개자
    - 클라이언트의 모든 요청을(수정한 뒤에) 서버에 전달
    - 주로 보안을 위해 사용
    - 요청과 응답을 필터링
- 캐시: 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 창고
    - 웹 캐시와 캐시 프락시: 자주 찾는 것의 사본을 저장해두는 HTTP 프락시 서버
    - 멀리 떨어진 웹서버에서보다 근처 캐시에서 빨리 문서를 받을 수 있다
- 게이트웨이: 다른 애플리케이션과 연결된 특별한 웹 서버
    - 다른 서버들의 중개자로 동작하는 특별한 서버
    - HTTP 트래픽을 다른 프로토콜로 변환
    - 리소스를 가진 진짜 서버인 것처럼 요청을 다룸(예. HTTP > HTTP/FTP 게이트웨이 > FTP 서버)
- 터널: 단순히 HTTP 통신을 전달하기만 하는 특별한 프락시
    - 두 커넥션 사이에서 날 데이터를 그대로 전달해주는 HTTP 애플리케이션
    - 비 HTTP 데이터를 HTTP 연결을 통해 그대로 전송
    - 예) 암호화된 SSL 트래픽을 HTTP 커넥션으로 전송함으로써 웹 트래픽만 허용하는 사내 방화벽 통과
    - 클라이언트 >> (SSL) >>> 터널 시작 >> HTTP-SSL >> HTTP 커넥션 >> HTTP-SSL >> 터널 끝 >> SSL >> SSL 커넥션 >> 서버도달(43포트)
- 에이전트: 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램.(예.사람의 통제없이 스스로 HTTP 트랜잭션을 일으키고 데이터를 받아오는 자동화된 에이전트, 웹로봇)
